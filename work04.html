<!DOCTYPE html>
<html>
	<head>
		<meta charset="utf-8">
		<title>头像上传</title>
		<style type="text/css">
			div{
				width:400px;
				height: 400px;
				border:2px solid gray;
				background-repeat: no-repeat; 
			}
		</style>
	</head>
	<body>
		选择头像：
		<br/>
		<div id="dragimg"  ondrop="drop(event)" ondragenter="allowDrop(event)">
			
		</div>
		<script>
			window.onload=function(){
				var dragimg=document.getElementById("dragimg")
				dragimg.ondragover=allowDrop;
			}
			function allowDrop(ev){
				 ev.stopPropagation(); 
   				 ev.preventDefault(); 
			}
			function drop(ev){
			   ev.preventDefault(); 
			   var data = ev.dataTransfer; 
			   var files = data.files; 
			   var file = files[0]; 
			   var reader = new FileReader(); 
			   reader.onload=function(e)
			   {
			    dragimg.style.backgroundImage = "url('"+e.target.result+"')"; 
			   }
			    reader.readAsDataURL(file); 
			  }
		</script>
	</body>
</html>
